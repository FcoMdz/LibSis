<div
  class="container"
  *ngIf="usuario && (usuario.vendedor || usuario.administrador); else iniciarSesion"
>
<div>{{ formGroup.get('cliente')?.value }}</div>
<div class="row text-center">
  <div class="col-12">
    <h2>REGISTRAR ENCARGO</h2>
  </div>
</div>
<div class="row justify-content-center">
  <div class="col-lg-10 col-xl-8 col-xxl-5 mb-3 mb-lg-0">
    <div class="card">
      <form action="" [formGroup]="formGroup">
        <div class="card-header">Ingrese los siguientes datos</div>
        <div class="card-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <div class="input-group">
                <label class="input-group-text" for="cliente">Clientes</label>
                <span style="width: 82%">
                  <p-dropdown id="cliente" [options]="countries" optionLabel="name" optionValue="value" [filter]="true"
                    filterBy="name" styleClass="w-100" formControlName="cliente" placeholder="Ej. PacoWeb 777">
                  </p-dropdown>
                </span>
              </div>

              <div class="alert alert-danger mt-2"
                [hidden]="formGroup.get('cliente')?.valid || formGroup.get('cliente')?.pristine">

                <span *ngIf="formGroup.get('cliente')?.errors?.['required']">
                  Debes seleccionar un cliente.
                </span>
              </div>

            </li>

            <li class="list-group-item">
              <div class="input-group">
                <label class="input-group-text" for="producto">Productos</label>
                <span style="width: 79%;">
                  <p-dropdown id="producto" [options]="countries" optionLabel="name" optionValue="value" [filter]="true"
                    filterBy="name" styleClass="w-100" formControlName="producto" placeholder="Ej. Espada Maestra">
                  </p-dropdown>
                </span>
              </div>

              <div class="alert alert-danger mt-2"
                [hidden]="formGroup.get('producto')?.valid || formGroup.get('producto')?.pristine">

                <span *ngIf="formGroup.get('producto')?.errors?.['required']">
                  Debes seleccionar un cliente.
                </span>
              </div>

            </li>

            <li class="list-group-item">
              <div class="input-group">
                <label class="input-group-text" for="precio" id="basic-addon1">Precio $</label>
                <input id="precio" type="text" class="form-control" placeholder="000.00" aria-label="Username"
                  aria-describedby="basic-addon1" step=".01" disabled />
              </div>
            </li>
            <li class="list-group-item">
              <div class="input-group">
                <label for="impuesto" class="input-group-text" id="basic-addon1">Impuesto %</label>
                <input id="impuesto" type="text" class="form-control" placeholder="000.00" aria-label="Username"
                  aria-describedby="basic-addon1" step=".01" disabled />
              </div>
            </li>

            <li class="list-group-item">
              <div class="input-group">
                <label class="input-group-text" for="estado">Estado</label>
                <span style="width: 84%">
                  <p-dropdown id="estado" [options]="estado_encargo" optionLabel="name" optionValue="value"
                    [filter]="true" filterBy="name" styleClass="w-100" formControlName="estado"
                    placeholder="Ej. Apartado Entregado">
                  </p-dropdown>
                </span>
              </div>

              <div class="alert alert-danger mt-2"
                [hidden]="formGroup.get('cliente')?.valid || formGroup.get('cliente')?.pristine">

                <span *ngIf="formGroup.get('cliente')?.errors?.['required']">
                  Debes seleccionar un cliente.
                </span>
              </div>

            </li>

            <li class="list-group-item">
              <div class="input-group">
                <label for="abono" class="input-group-text" id="basic-addon1">Cantidad a abonar</label>
                <input id="abono" type="text" class="form-control" placeholder="000.00" aria-label="Username"
                  aria-describedby="basic-addon1" step=".01" formControlName="abono" />
              </div>

              <div class="alert alert-danger mt-2"
                [hidden]="formGroup.get('abono')?.valid || formGroup.get('abono')?.pristine">

                <span *ngIf="formGroup.get('abono')?.errors?.['required']">
                  Debes agregar una cantidad para abonar.
                </span>

                <span *ngIf="formGroup.get('abono')?.errors?.['pattern']">
                  Solo se pueden usar numeros.
                </span>
              </div>
            </li>
            <li class="list-group-item">
              <div class="input-group">
                <label for="cant" class="input-group-text" id="basic-addon1">Cantidad</label>
                <input id="cant" type="text" min="0" class="form-control" formControlName="cantidad" placeholder="Ej. 1"
                  aria-label="Username" aria-describedby="basic-addon1" />
              </div>

              <div class="alert alert-danger mt-2"
                [hidden]="formGroup.get('cantidad')?.valid || formGroup.get('cantidad')?.pristine">

                <span *ngIf="formGroup.get('cantidad')?.errors?.['required']">
                  Debes agregar una cantidad para abonar.
                </span>

                <span *ngIf="formGroup.get('cantidad')?.errors?.['pattern']">
                  Solo se pueden usar numeros.
                </span>
              </div>
            </li>
          </ul>
        </div>
        <div class="card-footer text-center">
          <div class="row">
            <div class="col-6">
              <button class="btn btn-outline-primary" style="width: 100%" [disabled]="formGroup.invalid">
                <i class="fa-solid fa-circle-plus"></i> Agregar
                <i class="fa-solid fa-circle-plus"></i>
              </button>
            </div>
            <div class="col-6">
              <button class="btn btn-outline-success" style="width: 100%" [disabled]="formGroup.invalid">
                <i class="fa-solid fa-receipt"></i> Registrar
                <i class="fa-solid fa-receipt"></i>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="col-lg-10 col-xl-8 col-xxl-6">
    <div class="card">
      <div class="card-body table-responsive">
        <table class="table table-dark table-striped">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Precio</th>
              <th>Impuesto</th>
              <th>Cantidad</th>
              <th>Quitar</th>
            </tr>
          </thead>
          <tbody class="text-center">
            <!-- <tr *ngFor="let datos of ">
                <td>
                  {{ datos.nombre }}
                </td>
                <td>${{ datos.precio }}</td>
                <td>${{ datos.impuesto }}</td>
                <td>
                  {{ datos.cantidad }}
                </td>
                <td>
                  <i
                    class="fa-regular fa-trash-can"
                    (click)="reducir(datos)"
                    style="cursor: pointer"
                  ></i>
                </td>
              </tr> -->
          </tbody>
        </table>
      </div>
      <div class="card-body">
        <div class="input-group my-2">
          <label class="input-group-text" for="subtotal">Subtotal $</label>
          <input id="subtotal" type="number" class="form-control" placeholder="$000.00" step=".01" aria-label="Username"
            aria-describedby="basic-addon1" disabled />
        </div>
        <div class="input-group my-2">
          <label class="input-group-text" for="imp">Impuestos $</label>
          <input id="imp" type="number" class="form-control" placeholder="$000.00" step=".01" aria-label="Username"
            aria-describedby="basic-addon1" disabled />
        </div>
        <div class="input-group my-2">
          <label class="input-group-text" for="total">Total $</label>
          <input id="total" type="number" class="form-control" placeholder="$000.00" step=".01" aria-label="Username"
            aria-describedby="basic-addon1" disabled />
        </div>
      </div>
    </div>
  </div>
  </div>
</div>

<ng-template #iniciarSesion>
  <div class="container my-4 text-center">
    <h1>Inicie sesión para acceder a esta página</h1>
  </div>
</ng-template>
